(this["webpackJsonpreact-rsa-client"]=this["webpackJsonpreact-rsa-client"]||[]).push([[0],{119:function(e,t,n){e.exports=n(238)},128:function(e,t){},130:function(e,t){},140:function(e,t){},142:function(e,t){},169:function(e,t){},170:function(e,t){},175:function(e,t){},177:function(e,t){},201:function(e,t){},237:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(118),s=n.n(c),i=n(24),o=n(25),l=n(23),u=n(27),p=n(26),m=n(35),d=n.n(m),f=(n(237),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length<=t?e:e.substr(0,t-3)+"..."}),h=function(e){return e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")},g=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).lenRSAOptions=[.5,1,2,3,4].map((function(e){return 1024*e})),a.genPrv=r.a.createRef(),a.genPub=r.a.createRef(),a.impPrv=r.a.createRef(),a.state={lenRSA:1024,impBuffer:"",rsa:null},a.generateNewIdentity=a.generateNewIdentity.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"generateNewIdentity",value:function(){var e=this;this.props.setLoading("Generating ".concat(this.state.lenRSA,"-bit RSA keypair")),this.setState({rsa:null}),setTimeout((function(){return e.setState((function(t){return t.rsa=new d.a({b:e.state.lenRSA}),e.props.setLoading(),t}))}),500)}},{key:"componentDidMount",value:function(){this.generateNewIdentity()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Keypair"),r.a.createElement("div",{className:"split compact"},r.a.createElement("textarea",{className:"ro",value:this.state.rsa?this.state.rsa.exportKey("pkcs8-private"):"",placeholder:"Private key",readOnly:!0,ref:this.genPrv,onClick:function(){return h(e.genPrv.current)}}),r.a.createElement("textarea",{className:"ro",value:this.state.rsa?this.state.rsa.exportKey("pkcs8-public"):"",placeholder:"Public key",readOnly:!0,ref:this.genPub,onClick:function(){return h(e.genPub.current)}})),r.a.createElement("div",{className:"sep"},r.a.createElement("div",{className:"sep2 inline"},r.a.createElement("button",{onClick:function(){e.props.setDialogue("Are you sure?","Previous pair will be overwritten. You may need to save it before generating a new keypair.",["overwrite","cancel"],(function(t){return"overwrite"===t&&e.generateNewIdentity()}))}},"Generate"),r.a.createElement("div",{className:"sep3 inline"},this.lenRSAOptions.map((function(t,n){return r.a.createElement("button",{key:n,className:e.state.lenRSA===t?"selected":"",onClick:function(){return e.setState({lenRSA:t})}},t)})))),r.a.createElement("button",{onClick:function(){e.setState({impBuffer:""}),e.props.setDialogue("Import keypair",r.a.createElement("textarea",{ref:e.impPrv,placeholder:"Private key",onChange:function(){return e.setState({impBuffer:e.impPrv.current.value})}}),["import","cancel"],(function(t){if("import"===t)try{var n=new d.a(e.state.impBuffer);n.exportKey("pkcs8-private"),e.setState({rsa:n,impBuffer:""})}catch(a){return String(a)}}))}},"Import")))}}]),n}(r.a.Component),v=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).encMsg=r.a.createRef(),a.encPub=r.a.createRef(),a.encRes=r.a.createRef(),a.state={result:"",processInfo:""},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Encryption"),r.a.createElement("div",{className:"split two-to-one compact"},r.a.createElement("textarea",{ref:this.encMsg,className:"top-left",placeholder:"Message",onChange:function(){return e.setState({result:""})}}),r.a.createElement("textarea",{ref:this.encPub,className:"bottom-left",placeholder:"Recipient's public key",onChange:function(){return e.setState({result:""})}}),r.a.createElement("textarea",{className:"ro right",value:this.state.result,placeholder:"Encrypted message",readOnly:!0,ref:this.encRes,onClick:function(){return h(e.encRes.current)}})),r.a.createElement("div",{className:"sep2"},r.a.createElement("button",{onClick:function(){e.props.setLoading("Encrypting..."),e.setState({processInfo:"encrypting..."}),setTimeout((function(){try{var t=(n=e.encMsg.current.value,a=e.encPub.current.value,new d.a(a).encrypt(n,"base64"));e.setState({result:t,processInfo:""})}catch(r){e.setState({processInfo:String(r)})}var n,a;e.props.setLoading()}))}},"Encrypt"),r.a.createElement("i",null,f(this.state.processInfo))))}}]),n}(r.a.Component),b=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).decMsg=r.a.createRef(),a.decPub=r.a.createRef(),a.decRes=r.a.createRef(),a.state={result:"",processInfo:""},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Decryption"),r.a.createElement("div",{className:"split two-to-one compact"},r.a.createElement("textarea",{className:"top-left",ref:this.decMsg,placeholder:"Encrypted message",onChange:function(){return e.setState({result:""})}}),r.a.createElement("textarea",{className:"bottom-left",ref:this.decPub,placeholder:"Private key",onChange:function(){return e.setState({result:""})}}),r.a.createElement("textarea",{className:"ro right",value:this.state.result,placeholder:"Original message",readOnly:!0,ref:this.decRes,onClick:function(){return h(e.decRes.current)}})),r.a.createElement("div",{className:"sep2"},r.a.createElement("button",{onClick:function(){e.props.setLoading("Decrypting..."),e.setState({processInfo:"decrypting..."}),setTimeout((function(){try{var t=(n=e.decMsg.current.value,a=e.decPub.current.value,new d.a(a).decrypt(n,"utf-8"));e.setState({result:t,processInfo:""})}catch(r){e.setState({processInfo:String(r)})}var n,a;e.props.setLoading()}))}},"Decrypt"),r.a.createElement("i",null,f(this.state.processInfo))))}}]),n}(r.a.Component),E=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"dialogue"},r.a.createElement("h2",null,this.props.title),r.a.createElement("p",null,this.props.desc),r.a.createElement("i",null,this.props.remark),r.a.createElement("div",{className:"sep-rev text-align-right"},(this.props.options||["ok"]).map((function(t,n){return r.a.createElement("button",{key:n,onClick:function(){return e.props.onClick(t)}},t)}))))}}]),n}(r.a.Component),y=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a.setDialogue=a.setDialogue.bind(Object(l.a)(a)),a.setLoading=a.setLoading.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",(function(t){return"Escape"===t.key&&e.setState({dialogue:void 0})}))}},{key:"setDialogue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"...",a=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};this.setState({dialogue:r.a.createElement(E,{title:t,desc:n,options:a,onClick:function(t){c(t)||e.setState({dialogue:void 0})}})})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-align-right"},r.a.createElement("button",{onClick:function(){var e=document.body.className.split(" ").filter((function(e){return 0!==e.length})),t=e.indexOf("dark-theme");-1===t?e.push("dark-theme"):e.splice(t,1),document.body.className=e.join(" ")}},"Dark-Theme")),r.a.createElement(g,{setDialogue:this.setDialogue,setLoading:this.setLoading}),r.a.createElement(v,{setLoading:this.setLoading}),r.a.createElement(b,{setLoading:this.setLoading}),r.a.createElement("div",{className:"quote"},r.a.createElement("a",{href:"http://github.com/rasmusmerzin/rsa-client"},"source")),this.state.dialogue&&r.a.createElement("div",{id:"popup"},this.state.dialogue),this.state.loading&&r.a.createElement("div",{id:"loading"},r.a.createElement("div",{className:"message"},this.state.loading),r.a.createElement("div",{className:"spinner"},"( )")))}}]),n}(r.a.Component);s.a.render(r.a.createElement(y,null),document.getElementById("app"))}},[[119,1,2]]]);
//# sourceMappingURL=main.3ebd1406.chunk.js.map