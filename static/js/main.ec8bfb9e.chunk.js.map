{"version":3,"sources":["App.js","index.js"],"names":["copyToClipboard","elem","select","setSelectionRange","document","execCommand","Identity","props","lenRSAOptions","genPrv","React","createRef","genPub","state","lenRSA","rsa","generateNewIdentity","bind","this","setState","setTimeout","NodeRSA","b","id","className","value","exportKey","placeholder","readOnly","ref","onClick","current","setDialogue","then","op","disabled","map","i","key","Component","Encryption","encMsg","encPub","encRes","result","processInfo","onChange","res","msg","pub","encrypt","e","String","Decryption","decMsg","decPub","decRes","prv","decrypt","Dialogue","onRemove","title","desc","options","App","Promise","resolve","reject","dialogue","undefined","classes","body","split","filter","c","length","darkIndex","indexOf","push","splice","console","log","join","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ec8bfb9e.chunk.js","sourcesContent":["import React from 'react';\nimport NodeRSA from 'node-rsa';\nimport './App.scss';\n\n\nconst copyToClipboard = elem => {\n  elem.select();\n  elem.setSelectionRange(0, 99999);\n  return document.execCommand('copy');\n};\n\nconst encrypt = (msg, pub) => {\n  const rsa = new NodeRSA(pub);\n  return rsa.encrypt(msg, 'base64');\n};\n\nconst decrypt = (msg, prv) => {\n  const rsa = new NodeRSA(prv);\n  return rsa.decrypt(msg, 'utf-8');\n};\n\nclass Identity extends React.Component {\n  lenRSAOptions = [512, 1024, 2048, 4096];\n  genPrv = React.createRef();\n  genPub = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      lenRSA: 1024,\n      rsa: null\n    };\n    this.generateNewIdentity = this.generateNewIdentity.bind(this);\n  }\n\n  generateNewIdentity() {\n    this.setState({ rsa: null });\n    setTimeout(() => this.setState({ rsa: new NodeRSA({ b: this.state.lenRSA }) }), 500);\n  }\n\n  componentDidMount() {\n    this.generateNewIdentity();\n  }\n\n  render() {\n    return <div>\n      <h1>Generate</h1>\n      {this.state.rsa === null && <div id='generating'>\n        <div>Generating {this.state.lenRSA}-bit RSA keypair <span>( )</span></div>\n      </div>}\n      <div className={'split compact' +(this.state.rsa === null ? ' hidden' : '')}>\n        <textarea\n          className='ro'\n          value={this.state.rsa ? this.state.rsa.exportKey('pkcs8-private') : ''}\n          placeholder='Private key'\n          readOnly\n          ref={this.genPrv}\n          onClick={() => copyToClipboard(this.genPrv.current)}\n        ></textarea>\n        <textarea\n          className='ro'\n          value={this.state.rsa ? this.state.rsa.exportKey('pkcs8-public') : ''}\n          placeholder='Public key'\n          readOnly\n          ref={this.genPub}\n          onClick={() => copyToClipboard(this.genPub.current)}\n        ></textarea>\n      </div>\n      <div className='sep'>\n        <div className='sep2 inline'>\n          <button\n            onClick={() => {\n              this.props.setDialogue(\n                'Are you sure?',\n                'Previous pair will be overwritten. You may need to save it before generating a new keypair.',\n                ['continue', 'cancel']\n              ).then(op => op === 'continue' && this.generateNewIdentity());\n            }}\n            disabled={this.state.rsa === null}\n          >Generate Keypair</button>\n          <div className='sep3 inline'>\n            {this.lenRSAOptions.map(\n              (b, i) => <button\n                key={i}\n                disabled={this.state.rsa === null}\n                className={this.state.lenRSA === b ? 'selected' : ''}\n                onClick={() => this.setState({ lenRSA: b })}\n              >{b}</button>\n            )}\n          </div>\n        </div>\n        <button\n          disabled//={this.state.rsa === null}\n          onClick={() => {}}\n        >Import</button>\n      </div>\n    </div>;\n  }\n}\n\nclass Encryption extends React.Component {\n  encMsg = React.createRef();\n  encPub = React.createRef();\n  encRes = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      result: '',\n      processInfo: ''\n    };\n  }\n\n  render() {\n    return <>\n      <h1>Encryption</h1>\n      <div className='split two-to-one compact'>\n        <textarea\n          ref={this.encMsg}\n          className='top-left'\n          placeholder='Message'\n          onChange={() => this.setState({ result: '' })}\n        />\n        <textarea\n          ref={this.encPub}\n          className='bottom-left'\n          placeholder=\"Recipient's public key\"\n          onChange={() => this.setState({ result: '' })}\n        />\n        <textarea\n          className='ro right'\n          value={this.state.result}\n          placeholder='Encrypted message'\n          readOnly\n          ref={this.encRes}\n          onClick={() => copyToClipboard(this.encRes.current)}\n        />\n      </div>\n      <div>\n        <button\n          onClick={() => {\n            this.setState({ processInfo: 'encrypting...' });\n            try {\n              const res = encrypt(this.encMsg.current.value, this.encPub.current.value);\n              this.setState({ result: res, processInfo: '' });\n            } catch(e) {\n              this.setState({ processInfo: String(e) });\n            }\n          }}\n        >Encrypt</button>\n        <i>{this.state.processInfo}</i>\n      </div>\n    </>;\n  }\n}\n\nclass Decryption extends React.Component {\n  decMsg = React.createRef();\n  decPub = React.createRef();\n  decRes = React.createRef();\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      result: '',\n      processInfo: ''\n    };\n  }\n\n  render() {\n    return <>\n      <h1>Decryption</h1>\n      <div className='split two-to-one compact'>\n        <textarea\n          className='top-left'\n          ref={this.decMsg}\n          placeholder='Encrypted message'\n          onChange={() => this.setState({ result: '' })}\n        />\n        <textarea\n          className='bottom-left'\n          ref={this.decPub}\n          placeholder='Private key'\n          onChange={() => this.setState({ result: '' })}\n        />\n        <textarea\n          className='ro right'\n          value={this.state.result}\n          placeholder='Original message'\n          readOnly\n          ref={this.decRes}\n          onClick={() => copyToClipboard(this.decRes.current)}\n        />\n      </div>\n      <div className='sep2'>\n        <button\n          onClick={() => {\n            this.setState({ processInfo: 'decrypting...' });\n            try {\n              const res = decrypt(this.decMsg.current.value, this.decPub.current.value);\n              this.setState({ result: res, processInfo: '' });\n            } catch(e) {\n              this.setState({ processInfo: String(e) });\n            }\n          }}\n        >Decrypt</button>\n        <i>{this.state.processInfo}</i>\n      </div>\n    </>;\n  }\n}\n\n\nclass Dialogue extends React.Component {\n  componentWillUnmount() {\n    (this.props.onRemove || (() => {}))();\n  }\n\n  render() {\n    return <div className='dialogue'>\n      <h2>{this.props.title}</h2>\n      <p>{this.props.desc}</p>\n      <div className='sep-rev text-align-right'>\n        {(this.props.options || ['ok']).map((op, i) =>\n          <button\n            key={i}\n            onClick={() => this.props.onClick(op)}\n          >{op}</button>\n        )}\n      </div>\n    </div>;\n  }\n}\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.setDialogue = this.setDialogue.bind(this);\n  }\n\n  setDialogue(title='?', desc='...', options=['ok']) {\n    return new Promise((resolve, reject) => {\n      this.setState({\n        dialogue: <Dialogue\n          title={title}\n          desc={desc}\n          options={options}\n          onRemove={reject}\n          onClick={op => {\n            resolve(op);\n            this.setState({ dialogue: undefined });\n          }}\n        />\n      });\n    });\n  }\n\n  render() {\n    return <>\n      <div className='text-align-right'>\n        <button\n          onClick={() => {\n            const className = 'dark-theme';\n            const classes = document.body.className.split(' ').filter(c => c.length !== 0);\n            const darkIndex = classes.indexOf(className);\n            if (darkIndex === -1) {\n              classes.push(className);\n            } else {\n              classes.splice(darkIndex, 1);\n            }\n            console.log(classes.join(' '));\n            document.body.className = classes.join(' ');\n          }}\n        >Dark-Theme</button>\n      </div>\n      <Identity setDialogue={this.setDialogue} />\n      <Encryption />\n      <Decryption />\n      {this.state.dialogue && <div id='popup'>{this.state.dialogue}</div>}\n    </>;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('app'));\n"],"sourceRoot":""}